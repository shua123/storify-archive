var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,o,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)a[n]=str(n,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),!function(e,t,n){function i(e){if(n.getComputedStyle){var t=function(e){if(e){try{var i=n.getComputedStyle(e)}catch(r){return}if(i&&"string"==typeof i.backgroundColor){if("transparent"==i.backgroundColor)return t(e.parentNode);var o=i.backgroundColor.match(/\((.*)\)/);if(o&&!(o.length<2)){var a=o[1].split(", ");return 4==a.length&&"0"==a[3]?t(e.parentNode):a}}}},i=t(e);if(!i||"transparent"==i)return"white";if(4==i.length&&"0"==i[3])return"white";if(!(i.length<3)){var r=.299*i[0]+.587*i[1]+.114*i[2]>186?"white":"black";return r}}}function r(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.body.appendChild(n)}function o(e,t){var n,i,r,o=[];try{if(document.querySelectorAll)o=document.querySelectorAll(e+"."+t);else if(document.getElementsByClassName)for(n=document.getElementsByClassName(t),i=0;r=n[i];i++)r.tagName.toLowerCase()==e&&o.push(r);else{n=document.getElementsByTagName(e);var s=RegExp("\\b"+t+"\\b");a(n,function(e){var t=e.className||e.getAttribute("class");t&&t.match(s)&&o.push(e)})}}catch(l){}return o}function a(e,t,n){for(var i=0;i<e.length;i++)t.call(n,e[i],i)}function s(e,t){n.addEventListener?n.addEventListener(e,t,!1):("message"==e&&(e="onmessage"),n.attachEvent(e,t))}function l(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=n.exec(t)&&(e=parseFloat(RegExp.$1))}return e}function f(e){this.options=e.options,this.more=!0,this.name=e.name,this.permalink=e.url.replace("https://storify.com/",p),this.src=this.permalink+(e.url.match(/.*\/$/)?"":"/")+"embed"+e.query,this.container=e.el,this.theme=i(this.container),y&&y[1]===this.name&&(this.src+="#"+y[2]),this.render(e)}var c=e.sfy;if(!c||"function"!=typeof c.loadAll){!function(e,t){function n(e){for(h=1;e=o.shift();)e()}var i,r,o=[],a=!1,s=t.documentElement,l=s.doScroll,f="DOMContentLoaded",c="addEventListener",u="onreadystatechange",h=/^loade|c/.test(t.readyState);t[c]&&t[c](f,r=function(){t.removeEventListener(f,r,a),n()},a),l&&t.attachEvent(u,i=function(){/^c/.test(t.readyState)&&(t.detachEvent(u,i),n())}),e.domReady=l?function(t){self!=top?h?t():o.push(t):function(){try{s.doScroll("left")}catch(n){return setTimeout(function(){e.domReady(t)},50)}t()}()}:function(e){h?e():o.push(e)}}(e,t);var c={};e.sfy=c;var u=l(),h=!!n.postMessage&&(-1==u||u>=8),d=e.s||{},p=(d.base_url||"//storify.com")+"/",m={},g=100,y=window.location.hash.match(/#sfy-(.+?-.+)-([0-9a-z]{6})/);f.prototype={render:function(){var e=this;this.options.template&&(this.src=p+"public/templates/"+this.options.template+"/index.html?src="+encodeURIComponent(this.permalink)+"&theme="+this.theme,this.options.header&&(this.src+="&header="+this.options.header),this.options.title&&(this.src+="&title="+this.options.title),this.options.canonical&&(this.src+="&canonical="+this.options.canonical));for(var n=document.getElementsByTagName("iframe"),i=0;i<n.length;i++){var r=n[i];if(r&&r.src&&r.src.match(new RegExp("^(https?:)?"+this.permalink))){this.iframe=r;break}}if(this.iframe?this.container=this.iframe.parentElement:this.iframe=t.createElement("iframe"),this.iframe.setAttribute("src",this.src),this.iframe.setAttribute("name",name),this.iframe.setAttribute("scrolling","no"),this.iframe.setAttribute("frameBorder","no"),this.iframe.setAttribute("allowTransparency","true"),this.iframe.style.display="block",this.iframe.style.backgroundColor="transparent",this.iframe.style.border="none",this.iframe.style.overflowX="hidden",this.iframe.style.overflowY="hidden",this.iframe.style.width=Math.min(this.container.clientWidth,900)+"px",this.iframe.style.maxWidth="900px",this.iframe.style.height=this.options.canonical?"40px":"700px",s("resize",function(){var t=Math.min(e.container.clientWidth,900)+"px";e.iframe.style.width=t,e.headerIframe&&(e.headerIframe.style.width=t)}),h||(this.iframe.style.overflowY="auto",this.iframe.setAttribute("scrolling","auto"),this.iframe.style.border="1px solid #ddd"),this.container.style.display="block",this.container.style.clear="left","slideshow"==this.options.template){var o=t.createElement("img");o.src=p+"public/img/ratio-5-8.png",o.style.width="100%",o.width="100%",this.iframe.style.position="absolute",this.iframe.style.top=0,this.iframe.style.left=0,this.iframe.style.height="100%",this.container.style.position="relative",this.container.appendChild(o)}else this.iframe.addEventListener?this.iframe.addEventListener("load",function(){},!1):this.iframe.attachEvent&&this.iframe.attachEvent("onload",function(){e.iframe.style.height=this.screen.height});this.iframe.parentElement||this.container.appendChild(this.iframe)},resize:function(e){e!=this.height&&(this.loading=!1,this.height=e,this.iframe.style.height=this.iframe.style.minHeight=e+"px")},storify:function(e){try{var e=JSON.parse(e),t={utm_medium:"embed",utm_source:window.location.hostname}}catch(n){return console&&console.error("STORIFY EMBED ERROR 1 : (storify-action) ",n),void 0}if(e.via=e.via||window.location.href,sfy&&sfy.showModal)sfy.showModal(e,t);else{sfy={},SFY_DISABLE_MODAL_ONLOAD=!0;var i=0;r(p+"public/js/bookmarklet.js",function(){var n=setInterval(function(){i++,"function"==typeof sfy.showModal&&(clearInterval(n),sfy.showModal(e,t)),i>20&&(clearInterval(n),console&&console.error("Storify> Could not load the sfy.showModal script"))},500)})}},noMoreElements:function(){this.more=!1},loadExternalNavIframe:function(e){var t=document.createElement("iframe"),n="header-"+e.storyId;document.getElementById(n)||(t.setAttribute("class","s-header-ext s-header-iframe_"+this.name),t.width="100%",t.frameBorder="no",t.allowtransparency="true",t.scrolling="no",t.setAttribute("style","border: none; display: none; height: 40px; overflow: hidden; position: fixed; top: 0; width:"+this.iframe.offsetWidth+"px"),t.setAttribute("id",n),this.headerIframe=this.iframe.parentElement.insertBefore(t,this.iframe),this.headerIframe.contentWindow.document.write(e.html),this.headerIframe.contentWindow.document.close())},toggleExternalNav:function(){if(this.headerIframe){var e=this.iframe.getBoundingClientRect().top+20,t="number"==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop,n=t>e,i=t<e+this.iframe.offsetHeight-50;this.headerIframe.style.display=n&&i?"block":"none"}},login:function(e){"object"==typeof d&&d.auth&&(d.auth.setUser(e),d.auth.setUserCookie(null),d.nav&&d.nav.updateUser())},scroll:function(e){var t=this.container;do e+=t.offsetTop;while(t=t.offsetParent);var n="number"==typeof window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop;v(250,v.easeOut,function(t){window.scroll(0,n+(e-n)*t)})},setHash:function(e){window.location.hash="#sfy-"+this.name+"-"+e.slice(1)}};var v=function(){function e(e,t,n,a){var s=i();r(function l(f){o&&(f=i());var c=f-s;if(c>e)n(1),"function"==typeof a&&a();else{var u=n(t(c/e));u!==!1&&r(l)}})}var t=window.performance,n=t&&(t.now||t.webkitNow||t.msNow||t.mozNow),i=n?n.bind(t):function(){return Date.now?Date.now():(new Date).getTime()},r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(function(){return e(i())},1e3/60)},o=!1;return r(function(e){o=e>1e12!=i()>1e12}),e.linear=function(e){return e},e.easeOut=function(e){return Math.sin(e*Math.PI/2)},e}();c.load=function(e){var t={el:e},n=[],i={};a(["url","username","slug","preview","canonical"],function(n){t[n]=e.getAttribute(n)}),a(["template","header","border","css","canonical","title"],function(t){var r=e.getAttribute(t);r&&(n.push(t+"="+r),i[t]=r)}),"object"==typeof d&&d.auth&&d.auth.user&&n.push("timestamp="+(new Date).valueOf()),t.options=i,t.url&&t.url.indexOf(p)>-1||!t.username||!t.slug||(t.url=p+t.username+"/"+t.slug,t.preview&&(t.url+="/preview"));var r=t.url.replace(new RegExp(".{0,10}"+p,"i"),"").replace("/","-").replace("/preview","");i.template&&(r+="_"+i.template),t.query="?"+n.join("&"),t.name=r,m[r]=m[r]||new f(t)},c.convertScripts=function(e){var n=t.getElementsByTagName("script"),i=n.length;a(n,function(n){var r=n.getAttribute("src");if(r&&r.indexOf(p)>-1&&!r.match(/public\/js\/(embed|support)/)&&!r.match(/placeholder\.js/)){var o=t.createElement("div"),s=r.substring(0,r.indexOf(".js")),l=s.replace(p,"").replace("/","-"),f=r.indexOf("?"),c=r.indexOf("=",f),u=f>0&&f<r.length&&c>f?r.substring(f+1).split("&"):[];m[l]||(o.setAttribute("class","sfy-story"),o.setAttribute("url",s),a(u,function(e){var e=e.split("=");o.setAttribute(e[0],e[1])}),n.parentNode.insertBefore(o,n))}return--i<=0?e():void 0})},c.loadAll=function(){c.convertScripts(function(){var e=o("div","sfy-story");a(e,c.load)})},e.domReady(function(){s("message",function(e){if(e.origin.match(/\.?storify\.com/)&&"tic!"!==e.data&&"string"==typeof e.data)try{var t=JSON.parse(e.data),n=m[t.sourceName],i=t.method;n&&n[i]&&n[i].apply(n,[t.value])}catch(e){return console&&console.error("STORIFY EMBED ERROR 2 : ",e),void 0}}),s("scroll",function(){for(var e in m){var t=m[e];if(t.toggleExternalNav(),t.loading)break;var n=t.container,i=0;do i+=n.offsetTop;while(n=n.offsetParent);if(t.more){var r=i+t.container.offsetHeight-window.scrollY-window.innerHeight-g;0>r&&(t.loading=!0,t.iframe.contentWindow&&t.iframe.contentWindow.postMessage("loadMore","*"))}var o=i+200-window.scrollY,a=o>0;a!=t.autoReload&&(t.autoReload=a,t.iframe.contentWindow&&t.iframe.contentWindow.postMessage(t.autoReload?"enableAutoReload":"disableAutoReload","*"))}}),s("hashchange",function(){var e=window.location.hash.match(/#sfy-(.+?-.+)-([0-9a-z]{6})/),t=e&&m[e[1]];t&&t.iframe.contentWindow.postMessage("hashchange:"+e[2],"*")}),c.loadAll()})}}(this,document,window);